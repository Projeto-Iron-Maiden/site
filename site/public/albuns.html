<!DOCTYPE html>
<html lang="pt-br">
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IRON MAIDEN</title>
  <script src="./js/funcoes.js"></script>
  <link rel="stylesheet" href="styles/albuns.css">

</head>

<body>
  <header class="header">
    <div class="logo">
      <!-- <img src="img/eddie.png" alt="Logo"> -->
      <span>IRON MAIDEN</span>
    </div>
    <div class="buttons">
      <a href="index.html#historia" style="--anima:#1e9bff"><span>história</span></a>
      <a href="index.html#membros" style="--anima:#00F519"><span>Membros</span></a>
      <a href="dashboardEstatico.html" style="--anima:#8a2be2"><span>Estatisticas</span></a>
      <a href="index.html" style="--anima:#ff0000"><span>home</span></a>
    </div>
  </header>
  <div class="container">
    <img class="imagem-fundo" src="img/fundo.png" alt="">
    <div class="container-albuns">
      <div class="container-item">
        <div class="movimentacao">
          <button onclick="calcularVezes(); alertar(); albumIron(); playmusic()" class="botão">Música aleatória</button>
          <button onclick="info()" class="botão">Informações</button>
          <img src="img/Iron maiden 1 album.webp" alt="">
        </div>
      </div>
      <div class="container-item">
        <button onclick="albumKillers(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/Killers.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumBeast(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/the number of the beast.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumPiece(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/Piece_of_Mind.webp" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumPower(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/powerslave.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumSomewhere(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/somewhere in time.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumSeventh(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/seventh son.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumPrayer(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/no prayer.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumFear(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/fear of the dark.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumX(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/The_x_factor_-_iron_maiden.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumVirtual(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/virtual xi.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumBrave(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/brave new world.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumDance(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/dance of death.png" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumMatter(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/a matter of life and death.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumFinal(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/the final frontier.jpg" alt="">
      </div>
      <div class="container-item">
        <button onclick="albumBook(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/book of souls.jpg" alt="">
      </div>
      <div class="container-item-ultima">
        <button onclick="albumSenjutsu(); playmusic()" class="botão">Música aleatória</button>
        <button onclick="info()" class="botão">Informações</button>
        <img src="img/senjutsu.jpg" alt="">
      </div>
    </div>
    <audio id="msc_sorteada" src="audio/Iron Maiden.mp3"></audio>
  </div>
  <div class="footer">
    <h4></h4>
    <span></span>
  </div>
  </div>
</body>

</html>
<script>

  var vetorAlbums = []

  function calcularVezes() {

    fetch(`/album/calcularVezes/`, { cache: 'no-store' }).then(function (response) {
      if (response.ok) {
        response.json().then(function (resposta) {
          console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
          resposta.reverse();

          var dadosG = {
            vetorAlbums: resposta[0].vezes,
          };

          alertar(resposta[0].vezes);
          sessionStorage.vetor = resposta[0].vezes
   

        });
      } else {
        console.error('Nenhum dado encontrado ou erro na API');
      }
    })
      .catch(function (error) {
        console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
      });
  }

  function alertar(vetorAlbums) {

    for (var i = 0; i < resposta.length; i++) {
      vetorAlbums.push(sessionStorage.vetor);
    }

      var cont1 = vetorAlbums[0]
      var cont2 = vetorAlbums[1]
      var cont3 = vetorAlbums[2]
      var cont4 = vetorAlbums[3]
      var cont5 = vetorAlbums[4]
      var cont6 = vetorAlbums[5]
      var cont7 = vetorAlbums[6]
      var cont8 = vetorAlbums[7]
      var cont9 = vetorAlbums[8]
      var cont10 = vetorAlbums[9]
      var cont11 = vetorAlbums[10]
      var cont12 = vetorAlbums[11]
      var cont13 = vetorAlbums[12]
      var cont14 = vetorAlbums[13]
      var cont15 = vetorAlbums[14]
      var cont16 = vetorAlbums[15]
      var cont17 = vetorAlbums[16]
  }

  var album = ""
  var id = ""
  var cont = 0

  function albumIron() {
    album = ironMaiden
    cont1++
    cont = cont1
    id = 1
  }
  function albumKillers() {
    album = killers
    cont2++
    cont = cont2
    id = 2
  }
  function albumBeast() {
    album = numberofbeast
    cont3++
    cont = cont3
    id = 3
  }
  function albumPiece() {
    album = pieceofmind
    cont4++
    cont = cont4
    id = 4
  }
  function albumPower() {
    album = powerslave
    cont5++
    cont = cont5
    id = 5
  }
  function albumSomewhere() {
    album = somewhere
    cont6++
    cont = cont6
    id = 6
  }
  function albumSeventh() {
    album = seventh
      / cont7++
    cont = cont7
    id = 7
  }
  function albumPrayer() {
    album = noprayer
    cont8++
    cont = cont8
    id = 8
  }
  function albumFear() {
    album = fearofthedark
    cont9++
    cont = cont9
    id = 9
  }
  function albumX() {
    album = xfactor
    cont10++
    cont = cont10
    id = 10
  }
  function albumVirtual() {
    album = virtualxi
    cont11++
    cont = cont11
    id = 11
  }
  function albumBrave() {
    album = bravenew
    cont12++
    cont = cont12
    id = 12
  }
  function albumDance() {
    album = danceofdeath
    cont13++
    cont = cont13
    id = 13
  }
  function albumMatter() {
    album = matteroflife
    cont14++
    cont = cont14
    id = 14
  }
  function albumFinal() {
    album = finalfrontier
    cont15++
    cont = cont15
    id = 15
  }
  function albumBook() {
    album = bookofsouls
    cont16++
    cont = cont16
    id = 16
  }
  function albumSenjutsu() {
    album = senjutsu
    cont17++
    cont = cont17
    id = 17
  }
  var ironMaiden = [
    'audio/IronMaiden/Charlotte the Harlot.mp3',
    'audio/IronMaiden/Iron Maiden.mp3',
    'audio/IronMaiden/Phantom of the Opera.mp3',
    'audio/IronMaiden/Prowler.mp3',
    'audio/IronMaiden/Remember Tomorrow.mp3',
    'audio/IronMaiden/Running Free.mp3',
    'audio/IronMaiden/Strange World.mp3',
    'audio/IronMaiden/Transylvania.mp3'
  ]
  var killers = [
    'audio/Killers/Another life.mp3',
    'audio/Killers/Drifter.mp3',
    'audio/Killers/Genghis Khan.mp3',
    'audio/Killers/Innocent Exile.mp3',
    'audio/Killers/Killers.mp3',
    'audio/Killers/Murders in the Rue Morgue.mp3',
    'audio/Killers/Prodigal Son.mp3',
    'audio/Killers/Purgatory.mp3',
    'audio/Killers/The Ides of March.mp3',
    'audio/Killers/Wrathchild.mp3'
  ]
  var numberofbeast = []
  var pieceofmind = []
  var powerslave = []
  var somewhere = []
  var seventh = []
  var noprayer = []
  var fearofthedark = []
  var xfactor = []
  var virtualxi = []
  var bravenew = []
  var danceofdeath = []
  var matteroflife = []
  var finalfrontier = []
  var bookofsouls = []
  var senjutsu = []

  function playmusic() {

    if (album.length > 0) {
      var musicaSorteada = parseInt(Math.random() * album.length);

      var musica = msc_sorteada
      musica.src = album[musicaSorteada]
      musica.play();

      album.splice(musicaSorteada, 1)
      console.log(musicaSorteada)
    } else {
      if (ironMaiden.length == 0) {
        ironMaiden.push(
          'audio/IronMaiden/Charlotte the Harlot.mp3',
          'audio/IronMaiden/Iron Maiden.mp3',
          'audio/IronMaiden/Phantom of the Opera.mp3',
          'audio/IronMaiden/Prowler.mp3',
          'audio/IronMaiden/Remember Tomorrow.mp3',
          'audio/IronMaiden/Running Free.mp3',
          'audio/IronMaiden/Strange World.mp3',
          'audio/IronMaiden/Transylvania.mp3'
        )
      }
      if (killers.length == 0) {
        killers.push(
          'audio/Killers/Another life.mp3',
          'audio/Killers/Drifter.mp3',
          'audio/Killers/Genghis Khan.mp3',
          'audio/Killers/Innocent Exile.mp3',
          'audio/Killers/Killers.mp3',
          'audio/Killers/Murders in the Rue Morgue.mp3',
          'audio/Killers/Prodigal Son.mp3',
          'audio/Killers/Purgatory.mp3',
          'audio/Killers/The Ides of March.mp3',
          'audio/Killers/Wrathchild.mp3'
        )
      }
      if (numberofbeast.length == 0) {

      }

    }

    fetch("/album/atualizarVezes/", {
      method: "PUT", //ou post
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({

        idServer: id,
        contServer: cont,

      })
    })

  }

</script>